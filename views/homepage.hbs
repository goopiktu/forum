
<div class="content">
  <div class="header">
    <div class="header-parts">
      <img class="logo" src="assets/sprites/Arryn House.png" alt="icon"></img> <!-- Supposed to be an icon -->
      {{#if user}}
      <a href="/recentPosts">
        <button class="nav-button">Recent</button>
      </a>
      <a href="/popularPosts">
        <button class="nav-button">Popular</button>
      </a>
      {{/if}}
    </div>
    <div class="header-parts">
        {{#if user}}
          <a href= {{profileLink username}}>
            <button class="nav-button right-nav">Profile</button>
          </a>
        {{/if}}
      <div class="img-logout">
        {{#if user}}
        <img class="icon" src="assets/sprites/default.png" alt="profile_pic">
        {{/if}}
        <form action="/logout?_method=DELETE" method="POST">
            <button type="submit" class="nav-button right-nav">Logout</button>
        </form>
      </div>
    </div> 
  </div>

  <div class="nav2-container">
    <input class="Search-bar" type="text" placeholder="Search..">

    {{{signUp user}}}

  </div>

  <div class="post-container"> 
    {{#each posts}}
    <div class ="post-fit">
      {{#if ../user}}
        <a href= {{link @index}}>
      {{/if}}
        {{> post}}
      {{#if ../user}}
        </a>
      {{/if}}
    </div>
    {{/each}}
  </div>
</div> 

<script>
  document.querySelector('.Search-bar').addEventListener('input', filterList);
  function filterList() {
    const searchInput = document.querySelector('.Search-bar');
    const filter = searchInput.value.toLowerCase();
    const listItems = document.querySelectorAll('.post-fit');

    listItems.forEach((item) => {
      const postTitle = item.querySelector('.post-title');
      const topComment = item.querySelector('.top-comment');

      let titleText = postTitle.textContent;
      let commentText = topComment.textContent;

      if (titleText.toLowerCase().includes(filter) || commentText.toLowerCase().includes(filter)) {
        item.style.display = '';
      } else {
        item.style.display = 'none';
      }
    });
  }
</script>